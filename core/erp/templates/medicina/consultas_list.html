{% extends "base.html" %}

{% block content %}
<nav class="mb-2" aria-label="breadcrumb">
    <ol class="breadcrumb mb-0">
        <li class="breadcrumb-item"><a href="{% url 'expedientes' %}">Medicina</a></li>
        <li class="breadcrumb-item">Consultas</li>
    </ol>
</nav>
<div class="mb-8">
    <h2 class="mb-2">Consultas</h2>
    <h5 class="text-700 fw-semi-bold"></h5>
</div>
<div class="row align-items-center g-4">
    <div class="col-12 col-md-auto">
        <div class="d-flex align-items-center">
            <span class="fa-stack" style="min-height: 46px;min-width: 46px;">
                <span class="fa-solid fa-square fa-stack-2x text-danger-300"
                    data-fa-transform="down-4 rotate--10 left-4"></span>
                <span class="fa-solid fa-circle fa-stack-2x stack-circle text-danger-100"
                    data-fa-transform="up-4 right-3 grow-2"></span>
                <span class="fa-stack-1x fa-solid fa-xmark text-danger "
                    data-fa-transform="shrink-2 up-8 right-6"></span>
            </span>
            <div class="ms-3">
                <h4 class="mb-0">{{ activos }} </h4>
                <p class="text-800 fs--1 mb-0">Activos</p>
            </div>
        </div>
    </div>
    <div class="col-12 col-md-auto">
        <div class="d-flex align-items-center">
            <span class="fa-stack" style="min-height: 46px;min-width: 46px;">
                <span class="fa-solid fa-square fa-stack-2x text-success-300"
                    data-fa-transform="down-4 rotate--10 left-4"></span>
                <span class="fa-solid fa-circle fa-stack-2x stack-circle text-success-100"
                    data-fa-transform="up-4 right-3 grow-2"></span>
                <span class="fa-stack-1x fa-solid fa-star text-success "
                    data-fa-transform="shrink-2 up-8 right-6"></span>
            </span>
            <div class="ms-3">
                <h4 class="mb-0">{{ cerrados }}</h4>
                <p class="text-800 fs--1 mb-0">Cerrados</p>
            </div>
        </div>
    </div>
    <div class="col-12 col-md-auto">
        <div class="d-flex align-items-center">
            <span class="fa-stack" style="min-height: 46px;min-width: 46px;">
                <span class="fa-solid fa-square fa-stack-2x text-warning-300"
                    data-fa-transform="down-4 rotate--10 left-4"></span>
                <span class="fa-solid fa-circle fa-stack-2x stack-circle text-warning-100"
                    data-fa-transform="up-4 right-3 grow-2"></span>
                <span class="fa-stack-1x fa-solid fa-pause text-warning "
                    data-fa-transform="shrink-2 up-8 right-6"></span>
            </span>
            <div class="ms-3">
                <h4 class="mb-0"> {{ otros }}</h4>
                <p class="text-800 fs--1 mb-0">Otros</p>
            </div>
        </div>
    </div>
</div>
<hr class="bg-200 mb-6 mt-4">
<div class="row flex-between-center mb-4 g-3">
    <div class="col-auto">
        <h3>Expedientes</h3>
        <p class="text-700 lh-sm mb-0"></p>
    </div>
</div>
<div class="row">
    <div class="col-md-4 my-3">
        <div class="card">
            <div class="card-header">
                <div>
                    <h5 class="fw-bold">
                        Inhabilitado
                    </h5>
                </div>
            </div>
            <div class="card-body  text-left">
                {% for jugador in jugadores %}
                {% if jugador.estado_medico == 'Inhabilitado' %}
                <li style="list-style: none;">
                    <a href="{% url 'expediente.detail' first_name=jugador.user.first_name last_name=jugador.user.last_name %}" class="text-primary">{{ jugador.user.first_name }} {{ jugador.user.last_name }}</a>
                </li>
                {% endif %}
                {% endfor %}
            </div>
        </div>
    </div>

    <div class="col-md-4 my-3">
        <div class="card">
            <div class="card-header">
                <div>
                    <h5 class="fw-bold">
                        Rehabilitación
                    </h5>
                </div>
            </div>
            <div class="card-body  text-left">
                {% for jugador in jugadores %}
                {% if jugador.estado_medico == 'Rehabilitacion' %}
                <li style="list-style: none;">
                    <a href="{% url 'expediente.detail' first_name=jugador.user.first_name last_name=jugador.user.last_name %}" class="text-primary">{{ jugador.user.first_name }} {{ jugador.user.last_name }}</a>
                </li>
                {% endif %}
                {% endfor %}
            </div>
        </div>
    </div>
    <div class="col-md-4 my-3">
        <div class="card">
            <div class="card-header">
                <div>
                    <h5 class="fw-bold">
                        Readaptación
                    </h5>
                </div>
            </div>
            <div class="card-body  text-left">
                {% for jugador in jugadores %}
                {% if jugador.estado_medico == 'Readaptacion' %}
                <li style="list-style: none;">
                    <a href="{% url 'expediente.detail' first_name=jugador.user.first_name last_name=jugador.user.last_name %}" class="text-primary">{{ jugador.user.first_name }} {{ jugador.user.last_name }}</a>
                </li>
                {% endif %}
                {% endfor %}
            </div>
        </div>
    </div>

</div>



<div id="expedientes"
    data-list="{&quot;valueNames&quot;:[&quot;name&quot;,&quot;status&quot;,&quot;date&quot;],&quot;page&quot;:10,&quot;pagination&quot;:true,&quot;filter&quot;:{&quot;key&quot;:&quot;status&quot;}}">
    <div class="justify-content-center my-5">
        <div class="row">
            <div class="col-md-3 my-3">
                <input type="text" class="search form-control" placeholder="Buscar">
            </div>

            <div class="col-md-3 my-3">
                <select class="form-select form-select-sm mb-3" data-list-filter="data-list-filter">
                    <option selected="" value="">Estado del jugador</option>
                    <option value="Activo">Activo</option>
                    <option value="Cerrado">Cerrado</option>
                </select>
            </div>
        </div>

    </div>
    <div class="table-responsive">
        <table class="table table-sm fs--1 mb-0">
            <thead>
                <tr class="bg-light">
                    <th class="sort border-top ps-3" data-sort="name">Jugador</th>
                    <th class="sort border-top" data-sort="date">Fecha de consulta</th>
                    <th class="sort border-top" data-sort="status">Estado</th>
                    <th class="sort align-middle text-center" scope="col">Acción</th>
                </tr>
            </thead>
            <tbody class="list">
                {% for player in consultas %}
                <tr>
                    <td class="align-middle ps-3 name">{{ player.user.first_name }} {{ player.user.last_name }} </td>
                    <td class="align-middle ps-3 date">{{ player.fecha_de_consulta }}</td>
                    <td class="align-middle status">
                        {% if player.estado == 'Activo' %}
                        <div class="badge badge-phoenix fs--2 badge-phoenix-danger">
                            {% elif player.estado == 'Cerrado' %}
                            <div class="badge badge-phoenix fs--2 badge-phoenix-success">
                                {% else %}
                                <div class="badge badge-phoenix fs--2 badge-phoenix-warning">
                                    {% endif %}
                                    <span class="fw-bold">
                                        {{ player.estado }}
                                    </span>
                                    <span class="fas fa-user-injured"></span>
                                </div>
                    </td>
                    <td class="align-middle white-space-nowrap text-center">
                        <div class="font-sans-serif btn-reveal-trigger position-static">
                            <button
                                class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2"
                                type="button" data-bs-toggle="dropdown" data-boundary="window" aria-haspopup="true"
                                aria-expanded="false" data-bs-reference="parent"><span
                                    class="fas fa-ellipsis-h fs--2"></span></button>
                            <div class="dropdown-menu dropdown-menu-end py-2">
                                <a class="dropdown-item" href="{% url 'consulta.detail' pk=player.id %}">Ver</a>
                                <a class="dropdown-item" href="#!">Exportar</a>
                            </div>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <div class="row align-items-center justify-content-between py-2 pe-0 fs--1">
        <div class="col-auto d-flex">
            <p class="mb-0 d-none d-sm-block me-3 fw-semi-bold text-900"
                data-list-info="data-list-info">0 to 0 <span class="text-600"> Items of </span>0</p>
            <a class="fw-semi-bold" href="#!" data-list-view="*">View all 
                <span class="fas fa-angle-right ms-1" data-fa-transform="down-1"></span>
            </a>
            <a
                class="fw-semi-bold d-none" href="#!" data-list-view="less">View Less 
                <span class="fas fa-angle-right ms-1" data-fa-transform="down-1"></span>
            </a>
        </div>
        <div class="col-auto d-flex">
            <button class="page-link disabled" data-list-pagination="prev" disabled="">
                <span class="fas fa-chevron-left"></span>
            </button>
            <ul class="mb-0 pagination">
                <li class="active"><button class="page" type="button" data-i="1"
                        data-page="5">1</button></li>
                <li><button class="page" type="button" data-i="2" data-page="5">2</button></li>
            </ul>
            <button class="page-link pe-0" data-list-pagination="next">
                <span class="fas fa-chevron-right"></span>
            </button>
        </div>
    </div>
</div>


{% endblock %}